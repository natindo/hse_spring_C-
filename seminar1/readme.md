# Matrix Class

Класс **Matrix** предназначен для работы с матрицами комплексных чисел. Основные возможности:
- Создание матрицы по количеству строк и столбцов.
- Загрузка матрицы из файла с использованием `mmap`.
- Арифметические операции над матрицами и комплексными числами (сложение, вычитание, умножение, деление, унарный минус).
- Вычисление определителя (det) для квадратных матриц.
- Решение систем линейных уравнений (метод Гаусса).
- Клонирование матрицы и оператор перемещения (move).

## Основные функции класса

### Конструкторы

1. **Matrix(int rows, int cols)**
    - Создаёт матрицу размером \(\mathrm{rows} \times \mathrm{cols}\).
    - Изначально все элементы инициализируются нулями.
    - При отрицательных размерах выбрасывает `std::invalid_argument`.

2. **Matrix(const std::string& filename)**
    - Открывает файл и считывает из него:
        1) Количество строк и столбцов
        2) Значения элементов (каждый элемент задан парой \(\mathrm{(real, imag)}\))
    - Использует `mmap` для отображения файла в память.
    - При ошибках (не удалось открыть/прочитать/размер неправильный) выводит сообщение в `std::cerr`.

3. **Matrix(Matrix&& rhs)** (конструктор перемещения)
    - Позволяет создавать матрицу путём «забирания» ресурсов у другой временной матрицы, что позволяет избежать лишнего копирования.

### Деструктор
- При уничтожении матрицы освобождаются соответствующие ресурсы:
    - динамический массив строк (ProxyRow);
    - при необходимости снимается отображение `mmap`, закрывается файл и т.д.

### Операторы доступа
- **operator[](int row)**: возвращает ссылку на «прокси-строку» (ProxyRow).
- **at(int row, int col)**: доступ к элементу \((\mathrm{row}, \mathrm{col})\) с проверкой на выход за границы (выбрасывает `std::out_of_range`).

### Специальные методы
- **det()**: вычисляет определитель \(\mathbf{det(A)}\) для квадратной матрицы методом Гаусса. При попытке вызвать на прямоугольной матрице выбрасывает `std::runtime_error`.
- **solveSystem(const Matrix& b)**: решает систему линейных уравнений \(\mathbf{A \times x = b}\) методом Гаусса, возвращает вектор-столбец решений. Если система вырождена или матрица не является квадратной, выбрасывает `std::runtime_error`.

### Прочие
- **clone()**: возвращает полную копию текущей матрицы.

## Структура ProxyRow
Вспомогательный класс для доступа к элементам «по строкам». Хранит:
- Указатель `Complex* data_`, содержащий элементы текущей строки.
- Количество столбцов `cols_number_`.
- Операторы перемещения, которые освобождают и передают владение динамическими массивами.

## Пример использования

```cpp
#include "matrix.h"
#include <iostream>
#include <complex>

int main() {
    using Complex = std::complex<double>;

    // Создадим матрицу 2x2
    Matrix A(2, 2);
    A[0][0] = Complex(1.0, 0.0);
    A[0][1] = Complex(2.0, 1.0);
    A[1][0] = Complex(3.0, -1.0);
    A[1][1] = Complex(4.0, 2.0);

    // Умножим на комплекс
    Matrix B = A * Complex(2.0, -1.0);

    // Выведем результат
    std::cout << "B =\n" << B << std::endl;

    // Определитель матрицы A
    std::cout << "det(A) = " << A.det() << std::endl;

    return 0;
}
```

## Тесты
1. **Тестирование**:
    - В репозитории имеется пример тестов на Google Test (см. `test_matrix.cpp`).
    - Установите библиотеку Google Test, соберите:
      ```bash
      ./generate_coverage_info.sh
      ```
    - В папке build/coverage_html содержится index.html, в котором будет храниться графическая информация о покрытии тестами
    - Тесты покрывают более 90% кода.
